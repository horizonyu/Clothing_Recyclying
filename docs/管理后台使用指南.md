# 管理后台使用指南

## 📋 概述

智能旧衣回收箱管理后台系统，用于管理设备、订单、用户、财务等业务数据。

## 🚀 快速开始

### 1. 前端启动

```bash
cd admin
npm install
npm run dev
```

访问 http://localhost:3000

### 2. 后端配置

确保后端服务已启动，并且已创建管理员账号。

### 3. 创建管理员账号

```bash
cd backend
python scripts/create_admin.py
```

默认账号：
- 用户名: `admin`
- 密码: `admin123`

**⚠️ 重要：首次登录后请立即修改密码！**

## 📱 功能模块

### 1. 工作台

- **数据概览**：今日投递次数、回收重量、发放金额、活跃用户
- **趋势图表**：近7日投递趋势折线图
- **告警信息**：设备离线、异常等告警

### 2. 设备管理

- **设备列表**：查看所有设备信息
- **设备搜索**：按设备ID、状态筛选
- **设备详情**：查看设备详细信息
- **设备编辑**：修改设备配置

### 3. 订单管理

- **订单列表**：查看所有投递订单
- **订单搜索**：按订单号、状态筛选
- **订单详情**：查看订单详细信息
- **订单审核**：审核可疑订单

### 4. 用户管理

- **用户列表**：查看所有注册用户
- **用户搜索**：按用户ID、手机号筛选
- **用户详情**：查看用户详细信息和投递记录
- **用户状态**：启用/禁用用户

### 5. 财务管理

- **财务统计**：累计收入、累计提现、待审核提现、平台余额
- **提现审核**：审核用户提现申请

### 6. 统计报表（开发中）

- 回收日报
- 设备报表
- 用户报表
- 财务报表

### 7. 系统管理（开发中）

- 账号管理
- 角色权限
- 操作日志
- 系统配置

## 🔐 权限说明

### 角色类型

- **super_admin**：超级管理员，拥有所有权限
- **admin**：普通管理员，拥有大部分权限
- **operator**：操作员，仅拥有查看和基本操作权限

## 🛠️ 开发说明

### 前端技术栈

- Vue 3
- Element Plus
- Vue Router
- Pinia
- Axios
- ECharts

### 后端API

所有管理后台API前缀为：`/api/v1/admin`

主要接口：
- `POST /api/v1/admin/auth/login` - 登录
- `GET /api/v1/admin/auth/profile` - 获取用户信息
- `GET /api/v1/admin/dashboard/stats` - 获取统计数据
- `GET /api/v1/admin/device/list` - 设备列表
- `GET /api/v1/admin/order/list` - 订单列表
- `GET /api/v1/admin/user/list` - 用户列表

### 添加新功能

1. **前端**：在 `admin/src/views/` 下创建新页面
2. **路由**：在 `admin/src/router/index.js` 中添加路由
3. **API**：在 `admin/src/api/admin.js` 中添加API调用
4. **后端**：在 `backend/app/api/v1/admin_*.py` 中添加接口

## 📝 注意事项

1. **安全性**
   - 生产环境必须修改默认密码
   - 使用HTTPS协议
   - 定期更新依赖包

2. **性能优化**
   - 大数据量使用分页
   - 图表数据缓存
   - API响应优化

3. **错误处理**
   - 网络错误提示
   - 数据加载失败处理
   - 表单验证

## 🐛 常见问题

### Q: 登录失败，提示"用户名或密码错误"

A: 检查：
1. 是否已创建管理员账号
2. 用户名和密码是否正确
3. 后端服务是否正常运行

### Q: 无法加载数据

A: 检查：
1. 后端API是否正常
2. 网络连接是否正常
3. 浏览器控制台是否有错误

### Q: 图表不显示

A: 检查：
1. ECharts是否正确安装
2. 数据格式是否正确
3. 容器高度是否设置

## 📞 技术支持

如遇问题，请查看：
1. 后端日志：`docker-compose logs -f api`
2. 浏览器控制台错误信息
3. 网络请求响应

---

**版本**: v1.0.0  
**更新日期**: 2025-01-XX
