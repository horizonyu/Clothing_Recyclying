<!--pages/wallet/wallet.wxml-->
<!--é’±åŒ…é¡µé¢-->

<view class="container">
  <!-- ä½™é¢å¡ç‰‡ -->
  <view class="balance-card">
    <view class="balance-header">
      <text class="balance-label">è´¦æˆ·ä½™é¢(å…ƒ)</text>
    </view>
    <view class="balance-amount">
      <text class="amount-symbol">Â¥</text>
      <text class="amount-value">{{formatMoney(balance)}}</text>
    </view>
    <view class="frozen-info" wx:if="{{frozenBalance > 0}}">
      <text>å†»ç»“é‡‘é¢: Â¥{{formatMoney(frozenBalance)}}</text>
    </view>
    <button class="withdraw-btn" bindtap="goToWithdraw">æç°</button>
  </view>

  <!-- äº¤æ˜“è®°å½• -->
  <view class="records-section">
    <view class="section-header">
      <text class="section-title">äº¤æ˜“è®°å½•</text>
    </view>

    <view class="records-list" wx:if="{{records.length > 0}}">
      <view class="record-item" wx:for="{{records}}" wx:key="id">
        <view class="record-info">
          <text class="record-type">{{getTypeText(item.type)}}</text>
          <text class="record-time">{{formatDate(item.created_at)}}</text>
        </view>
        <view class="record-amount {{item.type === 'income' || item.type === 'refund' ? 'income' : 'expense'}}">
          {{item.type === 'income' || item.type === 'refund' ? '+' : '-'}}Â¥{{formatMoney(item.amount)}}
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{records.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ’°</text>
      <text class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{records.length > 0 && !hasMore}}">
      <text>â€” æ²¡æœ‰æ›´å¤šäº† â€”</text>
    </view>
  </view>
</view>

