<!--pages/order-detail/order-detail.wxml-->
<!--è®¢å•è¯¦æƒ…é¡µé¢-->

<view class="container" wx:if="{{order}}">
  <!-- çŠ¶æ€å¡ç‰‡ -->
  <view class="status-card">
    <text class="status-icon">{{order.status === 1 ? 'âœ“' : 'â³'}}</text>
    <text class="status-text">{{getStatusInfo(order.status).text}}</text>
  </view>

  <!-- é‡‘é¢ä¿¡æ¯ -->
  <view class="amount-card card">
    <view class="amount-section">
      <text class="amount-label">å›æ”¶é‡‘é¢</text>
      <view class="amount-value">
        <text class="symbol">Â¥</text>
        <text class="value">{{formatMoney(order.amount)}}</text>
      </view>
    </view>
  </view>

  <!-- æŠ•é€’ä¿¡æ¯ -->
  <view class="info-card card">
    <view class="card-title">æŠ•é€’ä¿¡æ¯</view>
    <view class="info-list">
      <view class="info-item">
        <text class="info-label">æŠ•é€’è®¾å¤‡</text>
        <text class="info-value">{{order.device_name}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">è®¾å¤‡åœ°å€</text>
        <text class="info-value">{{order.device_address}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">æŠ•é€’é‡é‡</text>
        <text class="info-value">{{order.weight}} kg</text>
      </view>
      <view class="info-item">
        <text class="info-label">å›æ”¶å•ä»·</text>
        <text class="info-value">Â¥{{formatMoney(order.unit_price)}}/kg</text>
      </view>
      <view class="info-item">
        <text class="info-label">ç¢³å‡æ’é‡</text>
        <text class="info-value">{{order.carbon_reduction}} kg COâ‚‚</text>
      </view>
      <view class="info-item">
        <text class="info-label">è·å¾—ç§¯åˆ†</text>
        <text class="info-value">+{{order.points_earned}}</text>
      </view>
    </view>
  </view>

  <!-- è®¢å•ä¿¡æ¯ -->
  <view class="info-card card">
    <view class="card-title">è®¢å•ä¿¡æ¯</view>
    <view class="info-list">
      <view class="info-item" bindtap="copyOrderId">
        <text class="info-label">è®¢å•ç¼–å·</text>
        <view class="info-value-wrap">
          <text class="info-value">{{order.order_id}}</text>
          <text class="copy-btn">å¤åˆ¶</text>
        </view>
      </view>
      <view class="info-item">
        <text class="info-label">æŠ•é€’æ—¶é—´</text>
        <text class="info-value">{{formatDate(order.created_at)}}</text>
      </view>
      <view class="info-item" wx:if="{{order.claim_time}}">
        <text class="info-label">é¢†å–æ—¶é—´</text>
        <text class="info-value">{{formatDate(order.claim_time)}}</text>
      </view>
    </view>
  </view>

  <!-- è¡£ç‰©å»å‘ -->
  <view class="track-card card" bindtap="viewTrack">
    <view class="track-content">
      <text class="track-icon">ğŸ“¦</text>
      <text class="track-text">æŸ¥çœ‹è¡£ç‰©å»å‘</text>
    </view>
    <image class="track-arrow" src="/images/info.svg" mode="aspectFit"></image>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-wrap" wx:if="{{loading}}">
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>

